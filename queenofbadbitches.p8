pico-8 cartridge // http://www.pico-8.com
version 38
__lua__
--queen of bad bitches
--apolline

function _init()
	p={x=60,y=80,speed=1.5}
	bullets={}
	enemies={}
	explosions={}
	create_stars()
	state="menu"
	score=0
end

function _update60()
	if (state=="menu")	update_menu()
	if (state==0) update_game()
	if (state==1) update_gameover()
end

function _draw()
	if (state=="menu") draw_menu()
	if (state==0) draw_game()
	if (state==1) draw_gameover()
	if (score==27) draw_win()
end

function update_game()
	update_player()
	update_bullets()
	update_stars()
	if #enemies==0 then
		spawn_enemies(2+ceil(rnd(3)))
	end
	update_enemies()
	update_explosions()
end

function draw_game()
	cls()
	--stars
	for s in all(stars) do
		pset(s.x,s.y,s.col)
	end
	--vaisseau
	spr(1,p.x,p.y)
	--ennemis
	for e in all(enemies) do
		spr(3,e.x,e.y)
	end
	--explosions
	draw_explosions()
	--bullets
	for b in all(bullets) do
		spr(2,b.x,b.y)
	end
	--score
	print("score\n"..score,2,2,14)
end






-->8
--bullets

function shoot()
	new_bullet={
		x=p.x,
		y=p.y,
		speed=4
	}
	add(bullets,new_bullet)
	sfx(0)
end

function update_bullets()
	for b in all(bullets) do
		b.y-=b.speed
		if b.y<-8 then
			del(bullets,b)
		end
	end
end

-->8
--stars

function create_stars()
	stars={}
	for i=1,14 do
		new_star={
			x=rnd(128),
			y=rnd(128),
			col=1,
			speed=1+rnd(0.5)
		}
		add(stars,new_star)
	end
	for i=1,20 do
		new_star={
			x=rnd(128),
			y=rnd(128),
			col=6,
			speed=2+rnd(2)
		}
		add(stars,new_star)
	end
end

function update_stars()
	for s in all(stars) do
		s.y+=s.speed
		if s.y > 128 then
			s.y=0
			s.x=rnd(128)
		end
	end
end
-->8
--enemies

function spawn_enemies(amount)
	gap=(128-8*amount)/(amount+1)
	for i=1,amount do
		new_enemy={
			x=gap*i+8*(i-1),
			y=-20,
			life=4
		}
		add(enemies,new_enemy)
	end
end

function update_enemies()
	for e in all(enemies) do
		e.y+=0.3
		if e.y > 128 then 
			del(enemies,e)
		end
		--collision
		for b in all(bullets) do
			if collision(e,b) then
				create_explosion(b.x+4,b.y+2)
				del(bullets,b)
				e.life-=1
				if e.life==0 then
					del(enemies,e)
					score+=1
			 end
			end
		end
	end
end
-->8
--collission

function collision(a,b)
	return not (a.x>b.x+8
		or a.y>b.y+8
		or a.x+8<b.x
		or a.y+8<b.y)
end
-->8
--explosions

function create_explosion(_x,_y)
		sfx(1)
		add(explosions,{
		x=_x,
		y=_y,
		timer=0})
end

function update_explosions()
	for e in all(explosions) do
		e.timer+=1
		if e.timer==13 then
			del(explosions,e)
		end
	end
end

function draw_explosions()
	circ(x,y,rayon,couleur)
	
	for e in all(explosions) do
		circ(e.x,e.y,e.timer/3,
			8+e.timer%3)
	end
end
-->8
--player

function update_player()
	if (btn(‚û°Ô∏è)) p.x+=p.speed
	if (btn(‚¨ÖÔ∏è)) p.x-=p.speed
	if (btn(‚¨ÜÔ∏è)) p.y-=p.speed
	if (btn(‚¨áÔ∏è)) p.y+=p.speed
	if (btn(‚ùé)) shoot()
	
	for e in all(enemies) do
		if collision(e,p) then
			state=1
		end
	end
end
-->8
--gameover and you win

function update_gameover()
	if (btn(üÖæÔ∏è)) _init()
end

function draw_gameover()
	cls(2)
	rectfill(21,43,112,79,0)
	rectfill(18,40,110,76,14)
	print("sorry girl <3",32,46,7)
	print("taspe t'as eu!",30,56,7)
	print("appuie c et retente",28,66,7)
end

function draw_win()
	cls()
	print(spr(8,60,80))
	print("bravo!",21,26,7)
	print("tu les as eclatees!",21,36,7)
	print("voila de quoi briller",21,46,7)
	print("comme jamais...",21,56,7)
	print("pour le plus beau soleil",21,66,7)
end
-->8
--main update and draw

function update_menu()
	if (btnp(‚ùé)) state=0 
end

function draw_menu()
	cls()
	print(spr(1,50,3))
	print("happy you!",5,5,14)
	print("let's play a game !",5,15,14)
	print("tu vas devoir battre",5,35,14)
	print("le gang des taspe,",5,45,14)
	print("une armee de chattes!",5,55,14)
	print("butte en 27 avec la touche ‚ùé",5,65,14)
	print("like a peach, with a fat ass",5,85,14)
	print("and a big heart, tu auras alors",5,95,14)
	print("de quoi briller like a queen!!",5,105,14)
	print("clique ‚ùé pour demarrer",5,115,14)
end
__gfx__
000000000033000000e00e0005000500000000000000000005556055560000000a909a0000000000000000000000000000000000000000000000000000000000
000000000022322000e00e0056505650000000000000000005556055560000009009009000000000000000000000000000000000000000000000000000000000
0070070002ee2ee20020020056676650000000000000000005556055560000000a9a9a0000000000000000000000000000000000000000000000000000000000
000770002effe2ee0000000062666265000000000000000005556055560000008889888000000000000000000000000000000000000000000000000000000000
000770002efee2ee00200200e66566e500000000000000000555605556000000888a888000000000000000000000000000000000000000000000000000000000
0070070002ee2ee000000000665656650000000000000000055560555600000009a9a90000000000000000000000000000000000000000000000000000000000
00000000002eee00000000005666665000000000000000000555605556000000088a880000000000000000000000000000000000000000000000000000000000
000000000002e0000000000005555500000000000000000005556055560000000889880000000000000000000000000000000000000000000000000000000000
00005000000100000000200000000000000880000000000005556055560000000000000000000000000000000000000000000000000000000000000000000000
00009000001210000000200000000000008008000000000005555000555000000000000000000000000000000000000000000000000000000000000000000000
0005a500012821000000e00000000000080000800000000005555550005550000000000000000000000000000000000000000000000000000000000000000000
005a7a50128982100002f200000000000eeeeee00000000005555555500055500000000000000000000000000000000000000000000000000000000000000000
09a7a7a9289e982102efffe20000000022ee99e00000000005555555555005550000000000000000000000000000000000000000000000000000000000000000
005a7a50128982100002f200000000002288aa800000000005566555555505550000000000000000000000000000000000000000000000000000000000000000
0005a500012821000000e00000000000228888800000000005560665555505550000000000000000000000000000000000000000000000000000000000000000
00005000001210000000200000000000022222000000000005560006555505550000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000a0000000a000000a0a000000a0000000a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
a0aaa0a00aa0aa00000a000000aaa00000a0a000000a000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000a0000000a000000a0a000000a0000000a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000a000000000000000a0000a00a00a000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000a0000000000000a0a0a00a00000a00aaaaa00a00a00a0000000000000000000000000000000000000000000000000
00000000000a0000000a000000a0a000000a0000000a000000a0a0000a0a0a000a000a00000a0000000000000000000000000000000000000000000000000000
000a000000a0a00000aaa000000a00000aa0aa00a0aaa0a00a000a00a0a0a0a0aa0a0aa0a0a0a0a0000000000000000000000000000000000000000000000000
00000000000a0000000a000000a0a000000a0000000a000000a0a0000a0a0a000a000a00000a0000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000a0000000000000a0a0a00a00000a00aaaaa00a00a00a0000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000a000000000000000a0000a00a00a000000000000000000000000000000000000000000000000000000000
__label__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000600
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000006000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000600000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000060000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000600000000000000000000600000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000600000000000000000000000000000000000000000000000000330000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000223220060000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000002ee2ee2000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000002effe2ee000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000002efee2ee000000000000000000000000000000100000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000002ee2ee0000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000002eee00000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000002e000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000
00000000000000000000000006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

__sfx__
000100000b0200e03011030140301501014020110200e010020500800001000030000000006000020000000000000010000000001000010000000003000030000300003000030000200001000000000000000000
0002000013550115500e5500b55008550065500455000530005000150000500076000560004600006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
